<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="pandoc.css" type="text/css" />
</head>
<body>
<div id="TOC">
<ul>
<li><a href="#preface">Preface</a></li>
<li><a href="#maven-cheat-sheet">Maven Cheat Sheet</a><ul>
<li><a href="#standard-layout">Standard Layout</a></li>
<li><a href="#meta-inf">META-INF</a></li>
</ul></li>
<li><a href="#command-line">Command Line</a><ul>
<li><a href="#phases">Phases</a><ul>
<li><a href="#clean-lifecycle">Clean Lifecycle</a></li>
<li><a href="#default-lifecycle">Default Lifecycle</a></li>
<li><a href="#site-lifecycle">Site Lifecycle</a></li>
</ul></li>
<li><a href="#dependencies">Dependencies</a><ul>
<li><a href="#package-versions">Package Versions</a></li>
<li><a href="#available-up-to-maven-2.x">Available up to Maven 2.x</a></li>
<li><a href="#declare">Declare</a></li>
<li><a href="#list-all">List All</a></li>
</ul></li>
</ul></li>
<li><a href="#mvn-dependencylist">mvn dependency:list</a><ul>
<li><a href="#list-tree">List Tree</a></li>
<li><a href="#profiles">Profiles</a><ul>
<li><a href="#active-profile">Active Profile</a></li>
</ul></li>
<li><a href="#default-profile-and-resources">Default Profile And Resources</a></li>
<li><a href="#plugins">Plugins</a><ul>
<li><a href="#general-properties">General Properties</a></li>
<li><a href="#project.build.sourceencoding">project.build.sourceEncoding</a></li>
<li><a href="#compiler-plugin">Compiler Plugin</a></li>
<li><a href="#archetype-plugin">Archetype Plugin</a></li>
<li><a href="#help-plugin">Help Plugin</a></li>
<li><a href="#versions-plugin">Versions Plugin</a></li>
<li><a href="#assembly-plugin">Assembly Plugin</a></li>
<li><a href="#descriptor">Descriptor</a></li>
<li><a href="#site-plugin">Site Plugin</a></li>
<li><a href="#javadoc-plugin">Javadoc Plugin</a></li>
<li><a href="#jdk-8-old-projects">JDK 8, old projects</a></li>
</ul></li>
</ul></li>
<li><a href="#configurations">Configurations</a><ul>
<li><a href="#network-timeouts">Network Timeouts</a></li>
</ul></li>
<li><a href="#releasing-on-sossrh-sonatype-open-source-software-repository-hosting-service">Releasing on SOSSRH (Sonatype Open Source Software Repository Hosting Service)</a><ul>
<li><a href="#references-2">References</a></li>
</ul></li>
</ul>
</div>
<h1 id="preface"><a href="#preface">Preface</a></h1>
<p>This book aims to be a quick reference for programmers. Its goal is not to explain each technology, but instead to be a quick reference card.</p>
<p>For each argument, these are the points that are discussed.</p>
<ul>
<li>Big Picture
<ul>
<li>Here a brief explanation of the reasons why the technology is important is given. This section gives the programmer the minimum knowledge to sustain a chat about the argument. Questions like the following ones are answered in this section.
<ul>
<li>What the hell is that ?</li>
<li>What it is needed for ?</li>
<li>What can I do with that ?</li>
<li>Why should I be aware of that ?</li>
</ul></li>
</ul></li>
<li>Main Concepts
<ul>
<li>Each technology has its core concepts you should understand to properly use it.</li>
</ul></li>
<li>Set Up
<ul>
<li>A brief explanation about how you can install the technology. Not all the main ways you can install it are covered. But at least we try to give you a simple way you can start with.</li>
</ul></li>
<li>Problems And Solutions
<ul>
<li>If there are typical problems a programmer is going to face while she start with the new technology, we try to address them in this section, along with the possible answers.</li>
</ul></li>
<li>Examples
<ul>
<li>Short examples about how to use the technology.</li>
</ul></li>
</ul>
<p>Happy reading.</p>
<h1 id="maven-cheat-sheet"><a href="#maven-cheat-sheet">Maven Cheat Sheet</a></h1>
<h2 id="standard-layout"><a href="#standard-layout">Standard Layout</a></h2>
<pre><code>src/main/java       Application/Library sources
src/main/resources  Application/Library resources
src/main/filters    Resource filter files
src/main/config     Configuration files
src/main/scripts    Application/Library scripts
src/main/webapp     Web application sources
src/test/java       Test sources
src/test/resources  Test resources
src/test/filters    Test resource filter files
src/it          Integration Tests (primarily for plugins)
src/assembly        Assembly descriptors
src/site            Site
LICENSE.txt         Project&#39;s license
NOTICE.txt          Notices and attributions required by libraries that the project depends on
README.txt          Project&#39;s readme</code></pre>
<h2 id="meta-inf"><a href="#meta-inf">META-INF</a></h2>
<p>For jars, <code>META-INF</code> should be usually put under <code>src/main/resources</code> For wars, <code>META-INF</code> should be usually put under <code>src/main/webapp</code></p>
<h1 id="command-line"><a href="#command-line">Command Line</a></h1>
<p>$ mvn –help</p>
<p>usage: mvn [options] [<goal(s)>] [<phase(s)>]</p>
<table>
  <tr>
    <td>
Option
</td>
    <td>
Explication
</td>
    <td>
Note
</td>
  </tr>
  <tr>
    <td>
-am,–also-make
</td>
    <td>
If project list is specified, also build projects required by the list
</td>
    <td></td>
  </tr>
  <tr>
    <td>
-amd,–also-make-dependents
</td>
    <td>
If project list is specified, also build projects that depend on projects on the list
</td>
    <td></td>
  </tr>
  <tr>
    <td>
-B,–batch-mode
</td>
    <td>
Run in non-interactive (batch) mode
</td>
    <td></td>
  </tr>
  <tr>
    <td>
-b,–builder <arg>
</td>
    <td>
The id of the build strategy to use.
</td>
    <td></td>
  </tr>
  <tr>
    <td>
-C,–strict-checksums
</td>
    <td>
Fail the build if checksums don’t match
</td>
    <td></td>
  </tr>
  <tr>
    <td>
-c,–lax-checksums
</td>
    <td>
Warn if checksums don’t match
</td>
    <td></td>
  </tr>
  <tr>
    <td>
-cpu,–check-plugin-updates
</td>
    <td>
Ineffective, only kept for backward compatibility
</td>
    <td></td>
  </tr>
  <tr>
    <td>
-D,–define <arg>
</td>
    <td>
Define a system property
</td>
    <td>
Needed every time a system property like test.skip should pe passed along
</td>
  </tr>
  <tr>
    <td>
-e,–errors
</td>
    <td>
Produce execution error messages
</td>
    <td></td>
  </tr>
  <tr>
    <td>
-emp,–encrypt-master-password <arg>
</td>
    <td>
Encrypt master security password
</td>
    <td></td>
  </tr>
  <tr>
    <td>
-ep,–encrypt-password <arg><br />
</td>
    <td>
Encrypt server password
</td>
    <td></td>
  </tr>
  <tr>
    <td>  
-f,–file <arg><br />
</td>
    <td>
Force the use of an alternate POM file (or directory with pom.xml).
</td>
    <td></td>
  </tr>
  <tr>
    <td>      
-fae,–fail-at-end
</td>
    <td>
Only fail the build afterwards; allow all non-impacted builds to continue
</td>
    <td></td>
  </tr>
  <tr>
    <td>
-ff,–fail-fast
</td>
    <td>
Stop at first failure in reactorized builds
</td>
    <td></td>
  </tr>
  <tr>
    <td>         
-fn,–fail-never
</td>
    <td>
NEVER fail the build, regardless of project result
</td>
    <td></td>
  </tr>
  <tr>
    <td>   
-gs,–global-settings <arg>
</td>
    <td>
Alternate path for the global settings file
</td>
    <td></td>
  </tr>
  <tr>
    <td>
-h,–help
</td>
    <td>
Display help information
</td>
    <td></td>
  </tr>
  <tr>
    <td> 
-l,–log-file <arg>
</td>
    <td>
Log file to where all build output will go.
</td>
    <td></td>
  </tr>
  <tr>
    <td>
<p>-llr,–legacy-local-repository</p>
</td>
    <td>
Use Maven 2 Legacy Local Repository behaviour, ie no use of _remote.repositories. Can also be activated by using -Dmaven.legacyLocalRepo=true
</td>
    <td></td>
  </tr>
  <tr>
    <td>
-N,–non-recursive
</td>
    <td>
Do not recurse into sub-projects
</td>
    <td></td>
  </tr>
  <tr>
    <td>
-npr,–no-plugin-registry
</td>
    <td>
Ineffective, only kept for backward compatibility
</td>
    <td></td>
  </tr>
  <tr>
    <td>
-npu,–no-plugin-updates
</td>
    <td>
Ineffective, only kept for backward compatibility
</td>
    <td></td>
  </tr>
  <tr>
    <td>
-nsu,–no-snapshot-updates
</td>
    <td>
Suppress SNAPSHOT updates
</td>
    <td></td>
  </tr>
  <tr>
    <td>
-o,–offline
</td>
    <td>
Work offline
</td>
    <td></td>
  </tr>
  <tr>
    <td>
-P,–activate-profiles <arg>
</td>
    <td>
Comma-delimited list of profiles to activate
</td>
    <td></td>
  </tr>
  <tr>
    <td>
<p>-pl,–projects <arg></p>
<pre><code>                                    &lt;/td&gt;
&lt;td&gt;Comma-delimited list of specified reactor projects to build instead of all projects. A project can be specified by [groupId]:artifactId or by its relative path.</code></pre>
</td>
    <td></td>
  </tr>
  <tr>
    <td>
-q,–quiet
</td>
    <td>
Quiet output - only show errors
</td>
    <td></td>
  </tr>
  <tr>
    <td> 
-rf,–resume-from <arg>
</td>
    <td>
Resume reactor from specified project
</td>
    <td></td>
  </tr>
  <tr>
    <td> 
-s,–settings <arg>
</td>
    <td>
Alternate path for the user settings file
</td>
    <td></td>
  </tr>
  <tr>
    <td> 
-T,–threads <arg><br />
</td>
    <td>
Thread count, for instance 2.0C where C is core multiplied
</td>
    <td></td>
  </tr>
  <tr>
    <td> 
-t,–toolchains <arg>
</td>
    <td>
Alternate path for the user toolchains file
</td>
    <td></td>
  </tr>
  <tr>
    <td>
-U,–update-snapshots<br />
</td>
    <td>
Forces a check for missing releases and updated snapshots on remote repositories
</td>
    <td></td>
  </tr>
  <tr>
    <td>
-up,–update-plugins<br />
</td>
    <td>
Ineffective, only kept for backward compatibility
</td>
    <td></td>
  </tr>
  <tr>
    <td> 
<p>-V,–show-version</p>
</td>
    <td>
Display version information WITHOUT stopping build
</td>
    <td></td>
  </tr>
  <tr>
    <td> 
-v,–version<br />
</td>
    <td>
Display version information
</td>
    <td></td>
  </tr>
  <tr>
    <td> 
-X,–debug
</td>
    <td>
Produce execution debug output
</td>
    <td></td>
  </tr>
</table>




<h2 id="phases"><a href="#phases">Phases</a></h2>
<h3 id="clean-lifecycle"><a href="#clean-lifecycle">Clean Lifecycle</a></h3>
<table>
  <tr>
    <td>
pre-clean
</td>
    <td>
executes processes needed prior to the actual project cleaning
</td>
  </tr>
  <tr>
    <td>
clean
</td>
    <td>
remove all files generated by the previous build
</td>
  </tr>
  <tr>
    <td>
post-clean
</td>
    <td>
executes processes needed to finalize the project cleaning
</td>
  </tr>
</table>


<h3 id="default-lifecycle"><a href="#default-lifecycle">Default Lifecycle</a></h3>
<table>
  <tr>
    <td>
validate
</td>
    <td>
validate the project is correct and all necessary information is available.
</td>
  </tr>
  <tr>
    <td>
initialize
</td>
    <td>
initialize build state, e.g. set properties or create directories.
</td>
  </tr>
  <tr>
    <td>
generate-sources
</td>
    <td>
generate any source code for inclusion in compilation.
</td>
  </tr>
  <tr>
    <td>
process-sources
</td>
    <td>
process the source code, for example to filter any values.
</td>
  </tr>
  <tr>
    <td>
generate-resources
</td>
    <td>
generate resources for inclusion in the package.
</td>
  </tr>
  <tr>
    <td>
process-resources
</td>
    <td>
copy and process the resources into the destination directory, ready for packaging.
</td>
  </tr>
  <tr>
    <td>
compile
</td>
    <td>
compile the source code of the project.
</td>
  </tr>
  <tr>
    <td>
process-classes
</td>
    <td>
post-process the generated files from compilation, for example to do bytecode enhancement on Java classes.
</td>
  </tr>
  <tr>
    <td>
generate-test-sources
</td>
    <td>
generate any test source code for inclusion in compilation.
</td>
  </tr>
  <tr>
    <td>
process-test-sources
</td>
    <td>
process the test source code, for example to filter any values.
</td>
  </tr>
  <tr>
    <td>
generate-test-resources
</td>
    <td>
create resources for testing.
</td>
  </tr>
  <tr>
    <td>
process-test-resources
</td>
    <td>
copy and process the resources into the test destination directory.
</td>
  </tr>
  <tr>
    <td>
test-compile
</td>
    <td>
compile the test source code into the test destination directory
</td>
  </tr>
  <tr>
    <td>
process-test-classes
</td>
    <td>
post-process the generated files from test compilation, for example to do bytecode enhancement on Java classes. For Maven 2.0.5 and above.
</td>
  </tr>
  <tr>
    <td>
test
</td>
    <td>
run tests using a suitable unit testing framework. These tests should not require the code be packaged or deployed.
</td>
  </tr>
  <tr>
    <td>
prepare-package
</td>
    <td>
perform any operations necessary to prepare a package before the actual packaging. This often results in an unpacked, processed version of the package. (Maven 2.1 and above)
</td>
  </tr>
  <tr>
    <td>
package
</td>
    <td>
take the compiled code and package it in its distributable format, such as a JAR.
</td>
  </tr>
  <tr>
    <td>
pre-integration-test
</td>
    <td>
perform actions required before integration tests are executed. This may involve things such as setting up the required environment.
</td>
  </tr>
  <tr>
    <td>
integration-test
</td>
    <td>
process and deploy the package if necessary into an environment where integration tests can be run.
</td>
  </tr>
  <tr>
    <td>
post-integration-test
</td>
    <td>
perform actions required after integration tests have been executed. This may including cleaning up the environment.
</td>
  </tr>
  <tr>
    <td>
verify
</td>
    <td>
run any checks to verify the package is valid and meets quality criteria.
</td>
  </tr>
  <tr>
    <td>
install
</td>
    <td>
install the package into the local repository, for use as a dependency in other projects locally.
</td>
  </tr>
  <tr>
    <td>
deploy
</td>
    <td>
done in an integration or release environment, copies the final package to the remote repository for sharing with other developers and projects.
</td>
  </tr>
</table>


<h3 id="site-lifecycle"><a href="#site-lifecycle">Site Lifecycle</a></h3>
<table>
  <tr>
    <td>
pre-site
</td>
    <td>
executes processes needed prior to the actual project site generation
</td>
  </tr>
  <tr>
    <td>
site
</td>
    <td>
generates the project’s site documentation
</td>
  </tr>
  <tr>
    <td>
post-site
</td>
    <td>
executes processes needed to finalize the site generation, and to prepare for site deployment
</td>
  </tr>
  <tr>
    <td>
site-deploy
</td>
    <td>
deploys the generated site documentation to the specified web server
</td>
  </tr>
</table>


<h2 id="dependencies"><a href="#dependencies">Dependencies</a></h2>
<h3 id="package-versions"><a href="#package-versions">Package Versions</a></h3>
<p>The exact version</p>
<pre><code>&lt;version&gt;&lt;major&gt;.&lt;minor&gt;.&lt;incremental&gt;&lt;/version&gt;</code></pre>
<p>The latest snapshot of the given version</p>
<pre><code>&lt;version&gt;&lt;major&gt;.&lt;minor&gt;.&lt;incremental&gt;-SNAPSHOT&lt;/version&gt;
    </code></pre>
<p>Declare an exact version.</p>
<pre><code>&lt;version&gt;[1.0.1]&lt;/version&gt;</code></pre>
<p>Declare an explicit version, will always resolve to 1.0.1 unless a collision occurs, when Maven will select a matching version.</p>
<pre><code>&lt;version&gt;1.0.1&lt;/version&gt;</code></pre>
<p>Use any version that 1.0.0 &lt;= version &lt; 2.0.0, i.e: 1.9.9</p>
<pre><code>&lt;version&gt;[1.0.0,2.0.0)&lt;/version&gt;</code></pre>
<p>Declare an open-ended version, i.e: 4.3.2, but not 0.4.4</p>
<pre><code>&lt;version&gt;[1.0.0,)&lt;/version&gt;</code></pre>
<h3 id="available-up-to-maven-2.x"><a href="#available-up-to-maven-2.x">Available up to Maven 2.x</a></h3>
<p>LATEST refers to the latest released or snapshot version of a particular artifact, the most recently deployed artifact in a particular repository.</p>
<pre><code>&lt;version&gt;LATEST&lt;/version&gt;</code></pre>
<p>RELEASE refers to the last non-snapshot release in the repository.</p>
<pre><code>&lt;version&gt;RELEASE&lt;/version&gt;  </code></pre>
<h3 id="declare"><a href="#declare">Declare</a></h3>
<p><dependencies></p>
<p><dependency></p>
<p><groupId>{groupId}</groupId></p>
<p><artifactId>{artifactId}</artifactId></p>
<p><version>{version}</version></p>
<p><exclusions></p>
<p><exclusion></p>
<pre><code>    &lt;groupId&gt;{excludedGroupId}&lt;/groupId&gt;</code></pre>
<p><artifactId>{excludedArtifactId}</artifactId></p>
<p></exclusion></p>
<p></exclusions></p>
<p></dependency></p>
<p></dependencies></p>
<p>excludedGroupId:excludedArtifactId won’t be brough in by groupId:artifactId regardless of its deep in the dependnecy tree.</p>
<h3 id="list-all"><a href="#list-all">List All</a></h3>
<p><a href="http://maven.apache.org/plugins/maven-dependency-plugin/list-mojo.html">http://maven.apache.org/plugins/maven-dependency-plugin/list-mojo.html</a></p>
<h1 id="mvn-dependencylist"><a href="#mvn-dependencylist">mvn dependency:list</a></h1>
<h2 id="list-tree"><a href="#list-tree">List Tree</a></h2>
<p><a href="http://maven.apache.org/plugins/maven-dependency-plugin/examples/resolving-conflicts-using-the-dependency-tree.html">http://maven.apache.org/plugins/maven-dependency-plugin/examples/resolving-conflicts-using-the-dependency-tree.html</a></p>
<pre><code>$ mvn dependency:tree -Dverbose -Dincludes=commons-collections</code></pre>
<h2 id="profiles"><a href="#profiles">Profiles</a></h2>
<h3 id="active-profile"><a href="#active-profile">Active Profile</a></h3>
<p>which profile is active</p>
<pre><code>$ mvn help:active-profiles</code></pre>
<h2 id="default-profile-and-resources"><a href="#default-profile-and-resources">Default Profile And Resources</a></h2>
<p>The ‘default’ profile is active by default. It means that Eclipse will use that, and will include files from env/development in the classpath (see the profile’s resource section).</p>
<p>When you want to build the project for a specific environment, through a given profile, remember to provide -Dspecific to disable development. So for instance…</p>
<pre><code>$ mvn assembly:single -Popenshift -Dspecific</code></pre>
<p>…will disable this profile during build.</p>
<pre><code>&lt;profiles&gt;
 &lt;profile&gt;
     &lt;id&gt;dev&lt;/id&gt;
     &lt;!-- This profile is active by default. It means that Eclipse will us
         that, and will include files from env/development in the classpath (see this
         profile&#39;s resource section). When you want to build the project for a specific
         environment, through a given profile, remember to provide -Dspecific to disable
         development. So for instance... mvn assembly:single -Popenshift -Dspecific
         ...will disable this profile during build. --&gt;

     &lt;activation&gt;

         &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;

         &lt;property&gt;

             &lt;name&gt;!specific&lt;/name&gt;

         &lt;/property&gt;

     &lt;/activation&gt;

     &lt;properties&gt;

         &lt;my.environment&gt;dev&lt;/my.environment&gt;

     &lt;/properties&gt;

     &lt;build&gt;

         &lt;resources&gt;

             &lt;resource&gt;

                 &lt;directory&gt;src/main/resources&lt;/directory&gt;

                 &lt;includes&gt;

                     &lt;include&gt;**/*&lt;/include&gt;

                 &lt;/includes&gt;

                 &lt;filtering&gt;true&lt;/filtering&gt;

             &lt;/resource&gt;

             &lt;resource&gt;

                 &lt;directory&gt;env/${my.environment}&lt;/directory&gt;

                 &lt;includes&gt;

                     &lt;include&gt;**/*&lt;/include&gt;

                 &lt;/includes&gt;

                 &lt;filtering&gt;true&lt;/filtering&gt;

             &lt;/resource&gt;

         &lt;/resources&gt;

     &lt;/build&gt;

 &lt;/profile&gt;

 &lt;profile&gt;

     &lt;id&gt;dockerized&lt;/id&gt;

     &lt;activation&gt;

         &lt;activeByDefault&gt;false&lt;/activeByDefault&gt;

     &lt;/activation&gt;

     &lt;properties&gt;

         &lt;my.environment&gt;dockerized&lt;/my.environment&gt;

     &lt;/properties&gt;

 &lt;/profile&gt;

&lt;/profiles&gt;</code></pre>
<p>To build…</p>
<pre><code>$ mvn build install =&gt; uses resources in env/dev

$ mvn build install -Dspecific -Pdockerized uses resources in /env/dockerized</code></pre>
<h2 id="plugins"><a href="#plugins">Plugins</a></h2>
<h3 id="general-properties"><a href="#general-properties">General Properties</a></h3>
<p>Lot of plugins share the same properties.</p>
<h3 id="project.build.sourceencoding"><a href="#project.build.sourceencoding">project.build.sourceEncoding</a></h3>
<p>Encodign for sources and resources.</p>
<p><properties></p>
<p><project.build.sourceEncoding>UTF-8</project.build.sourceEncoding></p>
<p></properties></p>
<h3 id="compiler-plugin"><a href="#compiler-plugin">Compiler Plugin</a></h3>
<pre><code>&lt;plugin&gt;

   &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;

   &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;

   &lt;version&gt;2.3.1&lt;/version&gt;

   &lt;configuration&gt;

       &lt;source&gt;1.6&lt;/source&gt;

       &lt;target&gt;1.6&lt;/target&gt;

   &lt;/configuration&gt;

   &lt;/plugin&gt;</code></pre>
<h3 id="archetype-plugin"><a href="#archetype-plugin">Archetype Plugin</a></h3>
<p><a href="http://maven.apache.org/guides/introduction/introduction-to-archetypes.html">http://maven.apache.org/guides/introduction/introduction-to-archetypes.html</a></p>
<p>Scaffold a project based on a “template” called archetype.</p>
<p>archetype:generate &gt; /tmp/archetype.txt</p>
<p>Store the list of available archetypes in a file, there are 1200+ of them.</p>
<p>archetype:generate -DarchetypeArtifactId=maven-archetype-quickstart</p>
<p>Generate a quickstart maven project</p>
<h4 id="useful-archetypes"><a href="#useful-archetypes">Useful Archetypes</a></h4>
<p>org.apache.maven.archetypes:maven-archetype-quickstart: An archetype which contains a sample Maven project.</p>
<h3 id="help-plugin"><a href="#help-plugin">Help Plugin</a></h3>
<p><a href="http://maven.apache.org/plugins/maven-help-plugin/">http://maven.apache.org/plugins/maven-help-plugin/</a></p>
<p>help:effective-pom</p>
<p>The effective pom, with dependencies from parent among other things.</p>
<p>help:describe</p>
<p>Describe a plugin, a mvn command, etc…</p>
<p>mvn help:describe -Dcmd=deploy</p>
<p>mvn help:describe -Dplugin=archetype (here “org.apache.” is probably added automatically as usual)</p>
<h3 id="versions-plugin"><a href="#versions-plugin">Versions Plugin</a></h3>
<p>versions:set</p>
<p>Sets the current projects version, updating the details of any child modules as necessary.</p>
<p>versions:commit</p>
<p>If all goes well</p>
<p>versions:rollback</p>
<p>To return to the latest versions</p>
<h4 id="references"><a href="#references">References</a></h4>
<p><a href="http://mojo.codehaus.org/versions-maven-plugin">http://mojo.codehaus.org/versions-maven-plugin</a></p>
<h3 id="assembly-plugin"><a href="#assembly-plugin">Assembly Plugin</a></h3>
<pre><code>&lt;plugin&gt;

&lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;

&lt;version&gt;2.5.2&lt;/version&gt;

&lt;executions&gt;

    &lt;execution&gt;

        &lt;id&gt;targz-assembly&lt;/id&gt;

        &lt;phase&gt;package&lt;/phase&gt;

        &lt;goals&gt;

            &lt;goal&gt;single&lt;/goal&gt;

        &lt;/goals&gt;

        &lt;configuration&gt;

            &lt;descriptors&gt;

                &lt;descriptor&gt;src/assembly/assembly.xml&lt;/descriptor&gt;

            &lt;/descriptors&gt;

        &lt;/configuration&gt;                        

    &lt;/execution&gt;

&lt;/executions&gt;

&lt;/plugin&gt;</code></pre>
<p>binds the building of the assembly to the package phase, so…</p>
<pre><code>$ mvn package</code></pre>
<p>…should be enough to build the distributable havin the project itself in the libraries.</p>
<h3 id="descriptor"><a href="#descriptor">Descriptor</a></h3>
<pre><code>&lt;assembly 

    xmlns=&quot;http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2&quot; 

    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;

    xsi:schemaLocation=&quot;

        http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 

        [http://maven.apache.org/xsd/assembly-1.1.2.xsd](http://maven.apache.org/xsd/assembly-1.1.2.xsd)&quot;&gt;

    &lt;id&gt;default&lt;/id&gt;    

    &lt;formats&gt;

        &lt;format&gt;tar.gz&lt;/format&gt;

    &lt;/formats&gt;

    &lt;!-- name of the folder the archive will be expanded to --&gt;

    &lt;baseDirectory&gt;Oracle.GFP&lt;/baseDirectory&gt;

    

    &lt;moduleSets&gt;

        &lt;!-- where project jar will be copied to --&gt;    

        &lt;moduleSet&gt;

            &lt;binaries&gt;

                &lt;outputDirectory&gt;lib&lt;/outputDirectory&gt;

            &lt;/binaries&gt;

        &lt;/moduleSet&gt;

    &lt;/moduleSets&gt;

    

    &lt;dependencySets&gt;

        &lt;!-- where dependencies will be copied to --&gt;

        &lt;dependencySet&gt;

            &lt;useProjectArtifact&gt;true&lt;/useProjectArtifact&gt;

            &lt;outputDirectory&gt;lib&lt;/outputDirectory&gt;

        &lt;/dependencySet&gt;

    &lt;/dependencySets&gt;

    

    &lt;fileSets&gt;

        &lt;!-- copies scritps --&gt;

        &lt;fileSet&gt;

            &lt;directory&gt;src/main/scripts&lt;/directory&gt;

            &lt;outputDirectory&gt;/&lt;/outputDirectory&gt;

            &lt;fileMode&gt;0744&lt;/fileMode&gt;

        &lt;/fileSet&gt;

        

        &lt;!-- copy the environmental configuration files --&gt;

        &lt;fileSet&gt;

            &lt;directory&gt;${basedir}/env/${my.environment}&lt;/directory&gt;

            &lt;outputDirectory&gt;/conf&lt;/outputDirectory&gt;

            &lt;includes&gt;

                &lt;include&gt;*.xml&lt;/include&gt;

            &lt;/includes&gt;         

        &lt;/fileSet&gt;

        &lt;!-- This is just a trick to create an empty ‘log’ folder --&gt;

        &lt;!-- assembly.xml can only create folders if you copy something →

&lt;!-- existing in them --&gt;

        &lt;fileSet&gt;

            &lt;directory&gt;${basedir}/src/main/resources&lt;/directory&gt;

            &lt;outputDirectory&gt;/log&lt;/outputDirectory&gt;

            &lt;excludes&gt;

                &lt;exclude&gt;*/**&lt;/exclude&gt;

            &lt;/excludes&gt;

        &lt;/fileSet&gt;

    &lt;/fileSets&gt;

&lt;/assembly&gt;</code></pre>
<h4 id="references-1"><a href="#references-1">References</a></h4>
<ul>
<li><p><a href="http://stackoverflow.com/questions/14276453/maven-assembly-include-the-current-project-jar-in-the-final-zip-tar">http://stackoverflow.com/questions/14276453/maven-assembly-include-the-current-project-jar-in-the-final-zip-tar</a></p></li>
<li><p><a href="http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html#class_fileSet">http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html#class_fileSet</a></p></li>
</ul>
<h3 id="site-plugin"><a href="#site-plugin">Site Plugin</a></h3>
<ul>
<li><p>site:site</p>
<ul>
<li>is used generate a site for a <strong>single project</strong>. Note that links between module sites in a multi module build will not work, since local build directory structure doesn’t match deployed site.</li>
</ul></li>
<li><p>site:deploy</p>
<ul>
<li>is used to deploy the generated site using Wagon supported protocol to the site URL specified in the <distributionManagement> section of the POM.</li>
</ul></li>
<li><p>site:run</p>
<ul>
<li>starts the site up, rendering documents as requested for faster editing. It uses Jetty as the web server.</li>
</ul></li>
<li><p>site:stage</p>
<ul>
<li>generates a site in a local staging or mock directory based on the site URL specified in the <distributionManagement> section of the POM. It can be used to test that links between module sites in a multi module build works. To preview the whole tree of a multi-module site, you can use the<a href="http://maven.apache.org/plugins/maven-site-plugin/stage-mojo.html">site:stage</a> goal. This will copy individual sites to their proper place at the staging location.</li>
</ul></li>
<li><p>site:stage-deploy</p>
<ul>
<li>deploys the generated site to a staging or mock directory to the site URL specified in the <distributionManagement> section of the POM.</li>
</ul></li>
<li><p>site:attach-descriptor</p>
<ul>
<li>adds the site descriptor (site.xml) to the list of files to be installed/deployed. For more references of the site descriptor, here’s a link.</li>
</ul></li>
<li><p>site:jar</p>
<ul>
<li>bundles the site output into a JAR so that it can be deployed to a repository.</li>
</ul></li>
<li><p>site:effective-site</p>
<ul>
<li>calculates the effective site descriptor, after inheritance and interpolation.</li>
</ul></li>
</ul>
<h3 id="javadoc-plugin"><a href="#javadoc-plugin">Javadoc Plugin</a></h3>
<pre><code>&lt;project&gt;

  ...

  &lt;reporting&gt;

    &lt;plugins&gt;

      &lt;plugin&gt;

        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;

        &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;

        &lt;version&gt;2.10.1&lt;/version&gt;

        &lt;configuration&gt;

          ...

        &lt;/configuration&gt;

      &lt;/plugin&gt;

    &lt;/plugins&gt;

    ...

  &lt;/reporting&gt;

  ...

&lt;/project&gt;</code></pre>
<h3 id="jdk-8-old-projects"><a href="#jdk-8-old-projects">JDK 8, old projects</a></h3>
<p>Old projects have probably javadoc comments that are not very well accepted by JDK8’s javadoc tool, namely ‘doclint’.</p>
<p>If you keep on receiving ERRORs about javadoc comments during the build process, try to disable ‘doclint’</p>
<p>Setting a property…</p>
<pre><code>&lt;properties&gt;

&lt;additionalparam&gt;-Xdoclint:none&lt;/additionalparam&gt;

&lt;/properties&gt;

or add it to the maven-javadoc-plugin:

&lt;plugins&gt;

    &lt;plugin&gt;

      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;

      &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;

      &lt;configuration&gt;

        &lt;additionalparam&gt;-Xdoclint:none&lt;/additionalparam&gt;

      &lt;/configuration&gt;

    &lt;/plugin&gt;

  &lt;/plugins&gt;</code></pre>
<h1 id="configurations"><a href="#configurations">Configurations</a></h1>
<h2 id="network-timeouts"><a href="#network-timeouts">Network Timeouts</a></h2>
<p><a href="http://maven.apache.org/guides/mini/guide-http-settings.html">http://maven.apache.org/guides/mini/guide-http-settings.html</a></p>
<p><a href="http://stackoverflow.com/questions/23510525/maven-dependency-timeout-settings/27015320#27015320">http://stackoverflow.com/questions/23510525/maven-dependency-timeout-settings/27015320#27015320</a></p>
<p>Network timeout can be set on a per server basis.</p>
<pre><code>&lt;server&gt;

&lt;id&gt;ask-3rdparties&lt;/id&gt;

    &lt;configuration&gt;

        &lt;httpConfiguration&gt;

            &lt;all&gt;&lt;!-- all | put | get | head --&gt;

                &lt;connectionTimeout&gt;5000&lt;/connectionTimeout&gt;

                &lt;readTimeout&gt;5000&lt;/readTimeout&gt;

            &lt;/all&gt;

        &lt;/httpConfiguration&gt;

    &lt;/configuration&gt;

&lt;/server&gt;</code></pre>
<h1 id="releasing-on-sossrh-sonatype-open-source-software-repository-hosting-service"><a href="#releasing-on-sossrh-sonatype-open-source-software-repository-hosting-service">Releasing on SOSSRH (Sonatype Open Source Software Repository Hosting Service)</a></h1>
<ul>
<li>Sonatype OSSRH (OSS Repository Hosting)
<ul>
<li>uses
<ul>
<li>Sonatype Nexus Professional</li>
</ul></li>
<li>to provide
<ul>
<li>repository hosting service</li>
</ul></li>
<li>for open source project binaries</li>
<li>allows you to
<ul>
<li>deploy development version binaries (snapshots)</li>
<li>stage release binaries</li>
<li>promote release binaries and sync them to the Central Repository</li>
</ul></li>
</ul></li>
</ul>
<p>To configure Maven to deploy to the OSSRH Nexus server with the Nexus Staging Maven plugin you have to configure the project pom.xml it like this:</p>
<pre><code>&lt;distributionManagement&gt;
    &lt;snapshotRepository&gt;
        &lt;id&gt;ossrh&lt;/id&gt;
        &lt;url&gt;https://oss.sonatype.org/content/repositories/snapshots&lt;/url&gt;
    &lt;/snapshotRepository&gt;
&lt;/distributionManagement&gt;   
&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.sonatype.plugins&lt;/groupId&gt;
            &lt;artifactId&gt;nexus-staging-maven-plugin&lt;/artifactId&gt;
            &lt;version&gt;1.6.3&lt;/version&gt;&lt;-- Or RELEASE --&gt;
            &lt;extensions&gt;true&lt;/extensions&gt;
            &lt;configuration&gt;
                &lt;serverId&gt;ossrh&lt;/serverId&gt;
                &lt;nexusUrl&gt;https://oss.sonatype.org/&lt;/nexusUrl&gt;
                &lt;autoReleaseAfterClose&gt;true&lt;/autoReleaseAfterClose&gt;
            &lt;/configuration&gt;
        &lt;/plugin&gt;   
      &lt;/plugins&gt;    
&lt;/build&gt;</code></pre>
<p>Since OSSRH is always running the latest available version of Sonatype Nexus Professional, it is best to use the latest version of the Nexus Staging Maven plugin.</p>
<p>To get Javadoc and Source jar files generated, you have to configure the javadoc and source Maven plugins.</p>
<pre><code>&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
            &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;
            &lt;version&gt;2.2.1&lt;/version&gt;
            &lt;executions&gt;
                &lt;execution&gt;
                    &lt;id&gt;attach-sources&lt;/id&gt;
                    &lt;goals&gt;
                        &lt;goal&gt;jar-no-fork&lt;/goal&gt;
                    &lt;/goals&gt;
                &lt;/execution&gt;
            &lt;/executions&gt;
        &lt;/plugin&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
            &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;
            &lt;version&gt;2.9.1&lt;/version&gt;
            &lt;executions&gt;
                &lt;execution&gt;
                    &lt;id&gt;attach-javadocs&lt;/id&gt;
                    &lt;goals&gt;
                        &lt;goal&gt;jar&lt;/goal&gt;
                    &lt;/goals&gt;
                &lt;/execution&gt;
            &lt;/executions&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;</code></pre>
<p>The Maven GPG plugin is used to sign the components with the following configuration.</p>
<pre><code>&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
            &lt;artifactId&gt;maven-gpg-plugin&lt;/artifactId&gt;
            &lt;version&gt;1.5&lt;/version&gt;
            &lt;executions&gt;
                &lt;execution&gt;
                    &lt;id&gt;sign-artifacts&lt;/id&gt;
                    &lt;phase&gt;verify&lt;/phase&gt;
                    &lt;goals&gt;
                        &lt;goal&gt;sign&lt;/goal&gt;
                    &lt;/goals&gt;
                &lt;/execution&gt;
            &lt;/executions&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;</code></pre>
<p>The Nexus Staging Maven Plugin is the recommended way to deploy your components to OSSRH and release them to the Central Repository. To configure it simply add the plugin to your Maven pom.xml.</p>
<pre><code>&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.sonatype.plugins&lt;/groupId&gt;
            &lt;artifactId&gt;nexus-staging-maven-plugin&lt;/artifactId&gt;
            &lt;version&gt;1.6.3&lt;/version&gt;
            &lt;extensions&gt;true&lt;/extensions&gt;
            &lt;configuration&gt;
                &lt;serverId&gt;ossrh&lt;/serverId&gt;
                &lt;nexusUrl&gt;https://oss.sonatype.org/&lt;/nexusUrl&gt;
                &lt;autoReleaseAfterClose&gt;true&lt;/autoReleaseAfterClose&gt;
            &lt;/configuration&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;</code></pre>
<p>Using a profile</p>
<p>Since the generation of the javadoc and source jars as well as signing components with GPG is a fairly time consuming process, these executions are typically isolated from the normal build configuration and moved into a profile. This profile is then in turn used when a deployment is performed by activating the profile.</p>
<pre><code>&lt;profiles&gt;
    &lt;profile&gt; 
        &lt;id&gt;release&lt;/id&gt;
        &lt;build&gt;
            &lt;!--javadoc, source and gpg plugin from above--&gt;
        &lt;/build&gt;
    &lt;/profile&gt;
&lt;/profiles&gt;</code></pre>
<p>Performing a Snapshot Deployment</p>
<pre><code>$ mvn clean deploy</code></pre>
<p>Performing a Release Deployment</p>
<p>If your version is a release version (does not end in -SNAPSHOT) and with this setup in place, you can run a deployment to OSSRH and an automated release to the Central Repository with the usual:</p>
<pre><code>$ mvn versions:set -DnewVersion=1.2.3
$ mvn clean deploy -P release</code></pre>
<h2 id="references-2"><a href="#references-2">References</a></h2>
<p><a href="http://ruleoftech.com/2014/distribute-projects-artifacts-in-maven-central-with-ossrh">http://ruleoftech.com/2014/distribute-projects-artifacts-in-maven-central-with-ossrh</a></p>
<p><a href="http://central.sonatype.org/pages/apache-maven.html">http://central.sonatype.org/pages/apache-maven.html</a></p>
</body>
</html>
